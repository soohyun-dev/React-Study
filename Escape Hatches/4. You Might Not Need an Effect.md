## You Might Not Need an Effect

### ğŸ“Œ í•™ìŠµ ëª©í‘œ

- ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ Effectsë¥¼ ì œê±°í•˜ëŠ” ì´ìœ ì™€ ë°©ë²•
- Effects ì—†ì´ ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ê³„ì‚°ì„ ìºì‹œí•˜ëŠ” ë°©ë²•
- Effects ì—†ì´ ì»´í¬ë„ŒíŠ¸ ìƒíƒœë¥¼ ì¬ì„¤ì •í•˜ê³  ì¡°ì •í•˜ëŠ” ë°©ë²•
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‚¬ì´ì— ë¡œì§ì„ ê³µìœ í•˜ëŠ” ë°©ë²•
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ì´ë™ì‹œì¼œì•¼í•˜ëŠ” ë¡œì§
- ë³€ê²½ì‚¬í•­ì— ëŒ€í•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ì•Œë¦¬ëŠ” ë°©ë²•

---

## ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ Effectsë¥¼ ì œê±°í•˜ëŠ” ì´ìœ ì™€ ë°©ë²•

Effectsê°€ í•„ìš”í•˜ì§€ ì•Šì€ ë‘ ê°€ì§€ ì¼ë°˜ì ì¸ ë°©ë²•

1. ë Œë”ë§ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ëŠ”ë° Effectsê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.

2. ì‚¬ìš©ì ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ëŠ” Effectsê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.

### Updating state based on props or state

```javascript
function Form() {
  const [firstName, setFirstName] = useState("Taylor");
  const [lastName, setLastName] = useState("Swift");

  // ğŸ”´ Avoid: redundant state and unnecessary Effect
  const [fullName, setFullName] = useState("");
  useEffect(() => {
    setFullName(firstName + " " + lastName);
  }, [firstName, lastName]);
  // ...
}
```

- ìœ„ ì½”ë“œëŠ” í•„ìš”ì´ìƒìœ¼ë¡œ ë³µì¡í•˜ê³  ë¹„íš¨ìœ¨ì ì´ë‹¤.

<br>

```javascript
function Form() {
  const [firstName, setFirstName] = useState("Taylor");
  const [lastName, setLastName] = useState("Swift");
  // âœ… Good: calculated during rendering
  const fullName = firstName + " " + lastName;
  // ...
}
```

- ìœ„ì½”ë“œë¡œ ìˆ˜ì •í•œë‹¤
- ê¸°ì¡´ props or stateì—ì„œ ë¬´ì–¸ê°€ë¥¼ ê²Œì‚°í•  ìˆ˜ ìˆëŠ” ê²½ìš° stateì— ë„£ì§€ ë§ì•„ì•¼í•œë‹¤.
- ëŒ€ì‹  ë Œë”ë§ ì¤‘ì— ê³„ì‚°í•˜ê²Œ í•´ì•¼í•œë‹¤.

<br>

### Resetting all state when a prop changes

```javascript
export default function ProfilePage({ userId }) {
  const [comment, setComment] = useState("");

  // ğŸ”´ Avoid: Resetting state on prop change in an Effect
  useEffect(() => {
    setComment("");
  }, [userId]);
  // ...
}
```

```javascript
export default function ProfilePage({ userId }) {
  return <Profile userId={userId} key={userId} />;
}

function Profile({ userId }) {
  // âœ… This and any other state below will reset on key change automatically
  const [comment, setComment] = useState("");
  // ...
}
```

<br>

### Adjusting some state when a prop changes

```javascript
function List({ items }) {
  const [isReverse, setIsReverse] = useState(false);
  const [selection, setSelection] = useState(null);

  // ğŸ”´ Avoid: Adjusting state on prop change in an Effect
  useEffect(() => {
    setSelection(null);
  }, [items]);
  // ...
}
```

```javascript
function List({ items }) {
  const [isReverse, setIsReverse] = useState(false);
  const [selection, setSelection] = useState(null);

  // Better: Adjust the state while rendering
  const [prevItems, setPrevItems] = useState(items);
  if (items !== prevItems) {
    setPrevItems(items);
    setSelection(null);
  }
  // ...
}
```

- ë Œë”ë§ ì¤‘ì— ìƒíƒœ ë³€ê²½í•˜ë„ë¡ ë¦¬íŒ©í„°ë§

<br>

### Sharing logic between event handlers

```javascript
function ProductPage({ product, addToCart }) {
  // ğŸ”´ Avoid: Event-specific logic inside an Effect
  useEffect(() => {
    if (product.isInCart) {
      showNotification(`Added ${product.name} to the shopping cart!`);
    }
  }, [product]);

  function handleBuyClick() {
    addToCart(product);
  }

  function handleCheckoutClick() {
    addToCart(product);
    navigateTo("/checkout");
  }
  // ...
}
```

- ì‚¬ìš©ìê°€ ì œí’ˆì„ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì„ ë•Œë§ˆë‹¤ ì•Œë¦¼ì„ í‘œì‹œí•˜ë ¤ëŠ” ì˜ë„ì˜ ì½”ë“œë‹¤.
- í•´ë‹¹ ì½”ë“œëŠ” ë²„ê·¸ê°€ ë°œìƒí•  í™•ë¥ ì´ ë†’ê³  ë¶ˆí•„ìš”í•˜ë‹¤.
- ì¼ë¶€ ì½”ë“œê°€ Effectsì— ìˆì–´ì•¼í•˜ëŠ”ì§€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ìˆì–´ì•¼í•˜ëŠ”ì§€ í—·ê°ˆë¦°ë‹¤ë©´ ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ì´ìœ ë¥¼ ì œëŒ€ë¡œ ì•Œì.

```javascript
function ProductPage({ product, addToCart }) {
  // âœ… Good: Event-specific logic is called from event handlers
  function buyProduct() {
    addToCart(product);
    showNotification(`Added ${product.name} to the shopping cart!`);
  }

  function handleBuyClick() {
    buyProduct();
  }

  function handleCheckoutClick() {
    buyProduct();
    navigateTo("/checkout");
  }
  // ...
}
```

- íŠ¹ì • ìƒí˜¸ ì‘ìš©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ê²½ìš°ë¼ë©´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
- ì‚¬ìš©ìê°€ í™”ë©´ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ëŠ” ê²ƒì´ ì£¼ëª©ì ì´ë¼ë©´ Effects

<br>

### ì–´í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”

```javascript
function App() {
  // ğŸ”´ Avoid: Effects with logic that should only ever run once
  useEffect(() => {
    loadDataFromLocalStorage();
    checkAuthToken();
  }, []);
  // ...
}
```

- ì•±ì´ ë¡œë“œë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰í•˜ê²Œ í•˜ëŠ” ì½”ë“œì´ì§€ë§Œ, ì½”ë“œê°€ ë‘ ë²ˆ ì‹¤í–‰ëœë‹¤. ì´ë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

<br>

```javascript
let didInit = false;

function App() {
  useEffect(() => {
    if (!didInit) {
      didInit = true;
      // âœ… Only runs once per app load
      loadDataFromLocalStorage();
      checkAuthToken();
    }
  }, []);
  // ...
}
```

<br>

### ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„° ì „ë‹¬

```javascript
function Parent() {
  const [data, setData] = useState(null);
  // ...
  return <Child onFetched={setData} />;
}

function Child({ onFetched }) {
  const data = useSomeAPI();
  // ğŸ”´ Avoid: Passing data to the parent in an Effect
  useEffect(() => {
    if (data) {
      onFetched(data);
    }
  }, [onFetched, data]);
  // ...
}
```

- React ë°ì´í„°ëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ íë¥¸ë‹¤.

- ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ Effectsì—ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ë©´ ë°ì´í„° íë¦„ì„ ì¶”ì í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤.

<br>

```javascript
function Parent() {
  const data = useSomeAPI();
  // ...
  // âœ… Good: Passing data down to the child
  return <Child data={data} />;
}

function Child({ data }) {
  // ...
}
```

- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ íë¥´ê²Œ ë³€ê²½

<br>

## ğŸ‘¨â€ğŸ’» ì •ë¦¬
